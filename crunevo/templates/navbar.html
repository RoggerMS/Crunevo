<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm fixed-top">
    <div class="container-fluid d-flex align-items-center justify-content-between">
        <a class="navbar-brand" href="{{ url_for('main.index') }}">CRUNEVO</a>
        <div class="d-flex align-items-center gap-2">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>


        <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title">Menú CRUNEVO</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
            </div>

            <div class="offcanvas-body">
                {% if current_user.is_authenticated %}
                <div class="user-info text-center mb-3">
                    <img src="{{ current_user.profile_picture_url or url_for('static', filename='images/default_avatar.png') }}"
                         class="rounded-circle mb-2 shadow-sm"
                         alt="Avatar"
                         style="width: 64px; height: 64px; object-fit: cover;">
                    <strong>{{ current_user.name }}</strong>
                    <p class="text-muted small mb-0">{{ current_user.email }}</p>
                </div>
                {% endif %}

                <ul class="list-group list-group-flush">
                    <li class="list-group-item bg-transparent border-0">
                        <a class="nav-link d-flex align-items-center" href="{{ url_for('main.index') }}">
                            <i class="fas fa-home me-2"></i> Inicio
                        </a>
                    </li>
                    <li class="list-group-item bg-transparent border-0">
                        <a class="nav-link d-flex align-items-center" href="{{ url_for('note.notes_section') }}">
                            <i class="fas fa-book me-2"></i> Apuntes
                        </a>
                    </li>
                    <li class="list-group-item bg-transparent border-0">
                        <a class="nav-link d-flex align-items-center" href="{{ url_for('store.tienda') }}">
                            <i class="fas fa-store me-2"></i> Tienda
                        </a>
                    </li>
                    <li class="list-group-item bg-transparent border-0">
                        <a class="nav-link d-flex align-items-center" href="{{ url_for('main.ranking') }}">
                            <i class="fas fa-trophy me-2"></i> Ranking
                        </a>
                    </li>
                    <li class="list-group-item bg-transparent border-0">
                        <a class="nav-link d-flex align-items-center" href="{{ url_for('forum.foro') }}">
                            <i class="fas fa-comments me-2"></i> Foro
                        </a>
                    </li>
                    {% if current_user.is_authenticated %}
                        <li class="list-group-item bg-transparent border-0">
                            <a class="nav-link d-flex align-items-center" href="{{ url_for('user.my_notes') }}">
                                <i class="fas fa-folder-open me-2"></i> Mis Apuntes
                            </a>
                        </li>
                        <li class="list-group-item bg-transparent border-0">
                            <a class="nav-link d-flex align-items-center" href="{{ url_for('user.profile') }}">
                                <i class="fas fa-user-circle me-2"></i> Perfil
                            </a>
                        </li>
                        <li class="list-group-item bg-transparent border-0">
                            <a class="nav-link d-flex align-items-center" href="{{ url_for('auth.logout') }}">
                                <i class="fas fa-sign-out-alt me-2"></i> Cerrar sesión
                            </a>
                        </li>
                    {% else %}
                        <li class="list-group-item bg-transparent border-0">
                            <a class="nav-link d-flex align-items-center" href="{{ url_for('auth.login') }}">
                                <i class="fas fa-sign-in-alt me-2"></i> Ingresar
                            </a>
                        </li>
                        <li class="list-group-item bg-transparent border-0">
                            <a class="nav-link d-flex align-items-center" href="{{ url_for('auth.register') }}">
                                <i class="fas fa-user-plus me-2"></i> Registrarse
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</nav>
